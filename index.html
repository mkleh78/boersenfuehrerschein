<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trader-Lizenz | Die Challenge</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Colors inspired by just-options.de and the screenshot */
            --bg-dark: #0A192F;         /* Deep Navy Blue background */
            --primary: #172A45;       /* Lighter Navy for containers */
            --text-light: #CCD6F6;    /* Light text */
            --text-mid: #8892B0;      /* Medium/subtle text */
            --accent-orange: #FF8C00; /* Bright Orange for accents */
            --accent-green: #2ecc71;  /* Success green */
            --accent-red: #e74c3c;    /* Error red */
            --border-color: #233554;  /* Border color */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 15px;
        }

        #quiz-container {
            background-color: var(--primary);
            border-radius: 10px;
            box-shadow: 0 10px 30px -15px rgba(2,12,27,0.7);
            width: 100%;
            max-width: 850px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        #quiz-header {
            background-color: transparent;
            padding: 25px 30px;
            border-bottom: 1px solid var(--border-color);
        }

        h1 {
            margin: 0;
            font-family: 'Roboto', sans-serif;
            font-size: 2em;
            font-weight: 700;
            color: white;
            text-align: center;
        }

        h1 span {
            color: var(--accent-orange);
        }

        #question-area {
            padding: 30px;
        }

        #progress-container {
             display: flex;
             align-items: center;
             gap: 15px;
             margin-bottom: 25px;
        }

        #question-counter {
            font-size: 0.9em;
            font-weight: 500;
            color: var(--text-mid);
            white-space: nowrap;
        }
        
        #progress-bar-container {
            width: 100%;
            background-color: var(--border-color);
            border-radius: 10px;
            height: 10px;
            overflow: hidden;
        }

        #progress-bar {
            width: 0%;
            height: 100%;
            background-color: var(--accent-orange);
            border-radius: 10px;
            transition: width 0.4s ease-in-out;
        }

        #question-text {
            font-size: 1.3em;
            font-weight: 500;
            margin-bottom: 30px;
            color: white;
            line-height: 1.5;
            min-height: 5em; /* Reserve space to prevent layout shifts */
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .option-btn {
            width: 100%;
            padding: 15px;
            font-size: 1em;
            font-weight: 500;
            background-color: transparent;
            color: var(--text-light);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s ease;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--accent-orange);
            color: var(--accent-orange);
            transform: translateY(-2px);
        }

        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .option-btn.correct {
            border-color: var(--accent-green);
            background-color: rgba(46, 204, 113, 0.1);
            color: var(--accent-green);
        }

        .option-btn.incorrect {
            border-color: var(--accent-red);
            background-color: rgba(231, 76, 60, 0.1);
            color: var(--text-light);
        }

        #feedback-text {
            margin-top: 25px;
            font-size: 0.95em;
            font-weight: 400;
            padding: 15px;
            border-radius: 8px;
            display: none;
            line-height: 1.6;
        }
        
        #feedback-text strong {
            display: block;
            margin-bottom: 5px;
            font-weight: 700;
        }

        #feedback-text.correct {
            border: 1px solid var(--accent-green);
            color: var(--accent-green);
            display: block;
        }

        #feedback-text.incorrect {
            border: 1px solid var(--accent-red);
            color: var(--text-light);
            display: block;
        }

        #navigation {
            padding: 25px 30px;
            text-align: right;
            border-top: 1px solid var(--border-color);
            min-height: 77px; /* Reserve space for button */
        }

        #next-btn {
            padding: 12px 35px;
            font-size: 1em;
            font-weight: 700;
            background-color: var(--accent-orange);
            color: var(--bg-dark);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: none;
        }

        #next-btn:hover {
            filter: brightness(1.15);
            transform: scale(1.03);
        }

        #results-screen {
            padding: 30px;
            text-align: center;
        }
        
        #results-screen h2 {
            font-family: 'Roboto', sans-serif;
            font-size: 2.2em;
            font-weight: 700;
            color: white;
            margin-bottom: 10px;
        }
        
        #overall-score-text {
            font-size: 1.1em;
            color: var(--text-mid);
            margin-bottom: 5px;
        }

        #score-percentage {
            font-family: 'Roboto', sans-serif;
            font-size: 4em;
            font-weight: 700;
            color: var(--accent-orange);
            margin-bottom: 25px;
        }

        #topic-results-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            text-align: left;
            margin-top: 20px;
        }
        .topic-result {
            background-color: var(--bg-dark);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        .topic-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .topic-name {
            font-weight: 700;
            color: white;
        }
        .topic-score {
            font-weight: 500;
            color: var(--text-mid);
        }
        .topic-progress-bar-container {
            width: 100%;
            background-color: var(--border-color);
            height: 8px;
            border-radius: 5px;
            overflow: hidden;
        }
        .topic-progress-bar {
            height: 100%;
            background-color: var(--accent-orange);
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        #restart-btn {
            padding: 15px 40px;
            font-size: 1.1em;
            font-weight: 700;
            background-color: var(--accent-orange);
            color: var(--bg-dark);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 30px;
        }
        #restart-btn:hover {
            filter: brightness(1.15);
            transform: scale(1.03);
        }

        @media (max-width: 700px) {
            body { padding: 0; }
            #quiz-container {
                border-radius: 0;
                border: none;
                min-height: 100vh;
            }
            .options-grid { grid-template-columns: 1fr; }
            h1 { font-size: 1.8em; }
            #question-text { font-size: 1.15em; min-height: 6em;}
            #results-screen { padding: 20px; }
            #question-area { padding: 20px; }
            #navigation { padding: 20px; }
        }
    </style>
</head>
<body>

    <div id="quiz-container">
        <div id="quiz-header">
            <h1>Trader-Lizenz<span> | Die Challenge</span></h1>
        </div>
        
        <div id="question-area">
            <div id="progress-container">
                <div id="question-counter"></div>
                <div id="progress-bar-container">
                    <div id="progress-bar"></div>
                </div>
            </div>
            <div id="question-text">Quiz wird geladen...</div>
            <div class="options-grid" id="options-container"></div>
            <div id="feedback-text"></div>
        </div>
        
        <div id="navigation">
            <button id="next-btn">Weiter</button>
        </div>

        <div id="results-screen" style="display: none;">
            <h2>Challenge abgeschlossen!</h2>
            <p id="overall-score-text">Dein Gesamtergebnis</p>
            <div id="score-percentage"></div>
            <h3 style="color: var(--text-light); margin-top: 30px; border-top: 1px solid var(--border-color); padding-top: 30px;">Leistung nach Themenfeld</h3>
            <div id="topic-results-container"></div>
            <button id="restart-btn">Neue Runde starten</button>
        </div>
    </div>

    <script>
        const quizTopics = {
            "Grundlagen & Begriffe": [
                { question: "Was ist eine Aktie?", answers: [{ text: "Ein Anteil an einem Unternehmen", correct: true, rationale: "Genau! Mit einer Aktie wirst du zum Miteigentümer eines Unternehmens." }, { text: "Ein Schuldschein von einer Bank", correct: false, rationale: "Falsch. Ein Schuldschein ist ein Kredit, den man vergibt. Eine Aktie ist hingegen ein Anteil an einem Unternehmen." }, { text: "Ein fester Zins, den man jährlich bekommt", correct: false, rationale: "Falsch. Feste Zinsen gibt es bei Anleihen oder auf dem Sparkonto. Der Wert einer Aktie kann schwanken." }, { text: "Ein Lottoschein für die Börse", correct: false, rationale: "Falsch. Auch wenn es manchmal so scheinen mag, basiert der Börsenhandel auf wirtschaftlichen Faktoren und nicht nur auf Glück." }] },
                { question: "Was ist die Börse?", answers: [{ text: "Ein organisierter Markt, an dem Wertpapiere gehandelt werden", correct: true, rationale: "Richtig, die Börse bringt Käufer und Verkäufer von Wertpapieren zusammen und sorgt für faire Preise." }, { text: "Ein Supermarkt für Geld", correct: false, rationale: "Falsch. Man kann an der Börse zwar Geld anlegen, aber es ist kein Geschäft, in dem man Geld direkt kauft oder verkauft." }, { text: "Ein Ort, an dem nur reiche Leute handeln", correct: false, rationale: "Falsch. Heutzutage kann dank Online-Brokern und Sparplänen praktisch jeder an der Börse teilnehmen." }, { text: "Eine staatliche Behörde zur Kontrolle der Wirtschaft", correct: false, rationale: "Falsch. Die Börse ist ein Teil der Wirtschaft und wird staatlich reguliert, aber nicht direkt kontrolliert." }] },
                { question: "Wer legt den Preis einer Aktie fest?", answers: [{ text: "Angebot und Nachfrage", correct: true, rationale: "Korrekt. Der Preis entsteht, wenn sich genügend Käufer und Verkäufer auf einen Wert einigen. Viele Aufträge bestimmen den Preis." }, { text: "Das Unternehmen selbst", correct: false, rationale: "Falsch. Das Unternehmen gibt die Aktien zwar aus (meistens nur einmal), aber der Markt bestimmt danach den Preis." }, { text: "Die Regierung", correct: false, rationale: "Falsch. Die Regierung reguliert den Markt, legt aber keine Aktienpreise fest." }, { text: "Die Bank des Käufers", correct: false, rationale: "Falsch. Die Bank führt nur den Auftrag des Käufers aus, bestimmt aber nicht den allgemeinen Marktpreis." }] },
                { question: "Was ist ein 'Depot'?", answers: [{ text: "Ein Konto zur Aufbewahrung von Wertpapieren", correct: true, rationale: "Genau, in einem Depot werden deine gekauften Aktien und ETFs digital 'gelagert'." }, { text: "Ein spezielles Sparkonto", correct: false, rationale: "Falsch. Es ist kein Sparkonto, da der Wert der Inhalte schwanken kann und es nicht für den Zahlungsverkehr gedacht ist." }, { text: "Der Tresorraum einer Börse", correct: false, rationale: "Falsch. Wertpapiere werden heute fast ausschließlich digital in Depots bei Banken oder Brokern verwahrt." }, { text: "Ein Synonym für das Girokonto", correct: false, rationale: "Falsch. Ein Girokonto ist für den täglichen Zahlungsverkehr, ein Depot ist ausschließlich für Wertpapiere." }] },
                { question: "Was ist ein 'Broker'?", answers: [{ text: "Eine Bank oder ein Finanzdienstleister, über den du handelst", correct: true, rationale: "Richtig, der Broker ist dein technischer Zugang zur Börse und führt deine Kauf- und Verkaufsaufträge aus." }, { text: "Ein Berater, der dir sagt, was du kaufen sollst", correct: false, rationale: "Falsch. Das wäre ein Anlageberater. Ein Broker führt in der Regel nur deine Befehle aus." }, { text: "Eine Person, die die Aktienkurse festlegt", correct: false, rationale: "Falsch. Die Kurse entstehen durch Angebot und Nachfrage aller Marktteilnehmer." }, { text: "Die Börsenaufsicht", correct: false, rationale: "Falsch. Die Aufsicht (in Deutschland die BaFin) überwacht den Handel, ist aber kein Broker." }] },
            ],
            "Produkte & Indizes": [
                { question: "Was ist ein ETF (Exchange Traded Fund)?", answers: [{ text: "Ein Fonds, der einen Index wie den DAX abbildet und an der Börse gehandelt wird", correct: true, rationale: "Genau. Mit einem ETF kauft man einen ganzen Korb von Aktien auf einmal und streut so automatisch das Risiko." }, { text: "Eine einzelne, sehr teure Aktie", correct: false, rationale: "Falsch. Ein ETF ist keine einzelne Aktie, sondern eine Sammlung von vielen." }, { text: "Eine spezielle Art von Sparkonto", correct: false, rationale: "Falsch. Ein ETF ist ein Wertpapier, dessen Wert schwanken kann, kein verzinstes Sparkonto." }, { text: "Eine Garantie, dass man kein Geld verliert", correct: false, rationale: "Falsch. Keine Anlage an der Börse ist ohne Risiko, auch ETFs können an Wert verlieren." }] },
                { question: "Was ist eine Dividende?", answers: [{ text: "Ein Teil des Unternehmensgewinns, der an Aktionäre ausgeschüttet wird", correct: true, rationale: "Richtig, es ist eine Art Gewinnbeteiligung für die Miteigentümer (Aktionäre). Nicht alle Unternehmen zahlen eine." }, { text: "Die Gebühr für den Kauf einer Aktie", correct: false, rationale: "Falsch. Die Gebühr nennt man Ordergebühr oder Courtage." }, { text: "Der Verlust, den man macht, wenn der Kurs fällt", correct: false, rationale: "Falsch. Ein Kursverlust ist keine Dividende, sondern ein Wertverlust des Anteils." }, { text: "Ein Rabatt beim Kauf von vielen Aktien", correct: false, rationale: "Falsch. Einen solchen Mengenrabatt gibt es an der Börse nicht." }] },
                { question: "Was ist der DAX?", answers: [{ text: "Der wichtigste deutsche Aktienindex mit den 40 größten Unternehmen", correct: true, rationale: "Korrekt, der DAX zeigt die Wertentwicklung der größten deutschen börsennotierten Unternehmen." }, { text: "Ein Gesetz zum Aktienhandel", correct: false, rationale: "Falsch. Gesetze regeln den Handel, aber der DAX ist ein Index (eine Kennzahl)." }, { text: "Die Börse in Frankfurt", correct: false, rationale: "Falsch. Die Börse Frankfurt ist der Handelsplatz, der DAX ist der Index, der dort berechnet wird." }, { text: "Ein Computerprogramm, das vor Betrug warnt", correct: false, rationale: "Falsch. Dafür gibt es Aufsichtsbehörden, der DAX ist eine Kennzahl." }] },
                { question: "Was ist der Unterschied zwischen einer Aktie und einer Anleihe?", answers: [{ text: "Aktie = Eigentum, Anleihe = Kredit", correct: true, rationale: "Mit einer Aktie bist du Eigentümer eines Unternehmens, mit einer Anleihe gibst du dem Unternehmen oder Staat einen Kredit." }, { text: "Aktien haben feste Zinsen, Anleihen nicht", correct: false, rationale: "Falsch, es ist genau umgekehrt. Anleihen haben oft einen festen Zins (Kupon)." }, { text: "Anleihen sind riskanter als Aktien", correct: false, rationale: "Falsch. Im Allgemeinen gelten Aktien als riskanter, da man bei einer Insolvenz erst nach den Anleihe-Gläubigern bedient wird." }, { text: "Man kann nur Aktien an der Börse handeln", correct: false, rationale: "Falsch. Auch Anleihen werden an der Börse gehandelt." }] },
                { question: "Was ist der S&P 500 Index?", answers: [{ text: "Ein Index, der die 500 größten börsennotierten US-Unternehmen umfasst", correct: true, rationale: "Richtig. Er gilt als repräsentativer für den gesamten US-Markt als der Dow Jones." }, { text: "Ein Index für die 500 besten Unternehmen der Welt", correct: false, rationale: "Falsch. Er ist auf die USA beschränkt." }, { text: "Eine Liste von 500 empfohlenen Aktien", correct: false, rationale: "Falsch. Es ist ein Marktindex, keine Empfehlungsliste." }, { text: "Ein Index, der von 500 Analysten bewertet wird", correct: false, rationale: "Falsch. S&P (Standard & Poor's) ist der Herausgeber des Index." }] },
            ],
            "Markt & Wirtschaft": [
                { question: "Was ist Inflation?", answers: [{ text: "Der Wert des Geldes sinkt und die Preise steigen", correct: true, rationale: "Richtig. Für einen Euro kann man sich in Zukunft weniger kaufen. Aktien können davor schützen." }, { text: "Dass Aktienkurse immer nur steigen", correct: false, rationale: "Falsch. Das wäre schön, ist aber nicht die Realität." }, { text: "Eine spezielle Steuer auf Aktiengewinne", correct: false, rationale: "Falsch. Steuern sind Abgaben, Inflation ist ein allgemeines wirtschaftliches Phänomen." }, { text: "Ein Konjunkturabschwung", correct: false, rationale: "Falsch. Das nennt man Rezession. Inflation kann auch bei guter Konjunktur auftreten." }] },
                { question: "Was beschreibt einen 'Bullenmarkt' (Hausse)?", answers: [{ text: "Eine Phase mit allgemein steigenden Kursen", correct: true, rationale: "Korrekt. Der Bulle stößt mit seinen Hörnern von unten nach oben, was steigende Kurse symbolisiert." }, { text: "Eine Phase mit allgemein fallenden Kursen", correct: false, rationale: "Falsch. Das wäre ein 'Bärenmarkt' (Baisse)." }, { text: "Ein Markt mit sehr wenigen Händlern", correct: false, rationale: "Falsch. Die Marktaktivität kann variieren, aber der Begriff beschreibt die Kursrichtung." }, { text: "Ein Markt für Agrarprodukte wie Rindfleisch", correct: false, rationale: "Falsch. Das ist eine witzige Assoziation, aber der Begriff stammt von der Symbolik der Tierbewegungen." }] },
                { question: "Was beschreibt einen 'Bärenmarkt' (Baisse)?", answers: [{ text: "Eine Phase mit allgemein fallenden Kursen", correct: true, rationale: "Korrekt. Der Bär schlägt mit seiner Tatze von oben nach unten, was fallende Kurse symbolisiert." }, { text: "Eine Phase mit allgemein steigenden Kursen", correct: false, rationale: "Falsch. Das wäre ein 'Bullenmarkt' (Hausse)." }, { text: "Ein Markt, der nur nachts geöffnet ist", correct: false, rationale: "Falsch. Die Handelszeiten sind festgelegt, haben aber nichts mit diesem Begriff zu tun." }, { text: "Ein Markt mit strengen Regeln", correct: false, rationale: "Falsch. Alle regulierten Märkte haben strenge Regeln, egal in welcher Phase sie sich befinden." }] },
                { question: "Wie können sich Zinserhöhungen durch die Zentralbank auf den Aktienmarkt auswirken?", answers: [{ text: "Sie können Aktienkurse belasten, weil Sparen attraktiver wird", correct: true, rationale: "Richtig, höhere Zinsen machen Anleihen attraktiver und verteuern Kredite für Unternehmen, was oft Druck auf Aktien ausübt." }, { text: "Sie führen immer zu steigenden Aktienkursen", correct: false, rationale: "Falsch. Das Gegenteil ist oft der Fall, da Geld aus dem Aktienmarkt abgezogen werden kann." }, { text: "Sie haben keinen Einfluss auf den Aktienmarkt", correct: false, rationale: "Falsch. Zinsentscheidungen sind eines der wichtigsten Ereignisse für die Finanzmärkte." }, { text: "Sie verbilligen den Aktienkauf", correct: false, rationale: "Falsch. Zinserhöhungen beeinflussen den Wert der Anlagen, nicht die direkten Kaufkosten." }] },
                { question: "Was ist eine Rezession?", answers: [{ text: "Eine Phase, in der die Wirtschaftsleistung eines Landes schrumpft", correct: true, rationale: "Genau. Technisch gesehen spricht man oft von einer Rezession, wenn das Bruttoinlandsprodukt (BIP) in zwei aufeinanderfolgenden Quartalen sinkt." }, { text: "Ein Börsencrash", correct: false, rationale: "Falsch. Ein Börsencrash kann eine Rezession begleiten oder auslösen, ist aber nicht dasselbe." }, { text: "Wenn die Inflation sehr hoch ist", correct: false, rationale: "Falsch. Hohe Inflation nennt man Inflation. Eine Kombination aus Rezession und Inflation nennt man Stagflation." }, { text: "Wenn die Regierung die Steuern erhöht", correct: false, rationale: "Falsch. Steuererhöhungen können die Wirtschaft beeinflussen, sind aber nicht die Definition einer Rezession." }] },
            ],
            "Strategie & Risiko": [
                { question: "Was bedeutet 'Diversifikation'?", answers: [{ text: "Sein Geld auf viele verschiedene Anlagen verteilen", correct: true, rationale: "Genau, das Streuen des Geldes reduziert das Risiko. 'Nicht alle Eier in einen Korb legen'." }, { text: "Sein ganzes Geld in eine einzige Aktie investieren", correct: false, rationale: "Falsch. Das ist das Gegenteil von Diversifikation und nennt sich Klumpenrisiko." }, { text: "Nur in Aktien aus dem eigenen Land investieren", correct: false, rationale: "Falsch. Das ist eine Form der Anlage, aber breite Diversifikation schließt auch andere Länder und Branchen ein." }, { text: "Jeden Tag Aktien kaufen und verkaufen", correct: false, rationale: "Falsch. Das ist 'Daytrading' und keine Diversifikationsstrategie." }] },
                { question: "Welches ist das größte Risiko beim Aktienkauf?", answers: [{ text: "Der Totalverlust des eingesetzten Geldes", correct: true, rationale: "Wenn das Unternehmen insolvent wird, kann die Aktie wertlos werden. Das ist das maximale Risiko beim normalen Aktienkauf." }, { text: "Dass man mehr Geld verliert, als man eingesetzt hat", correct: false, rationale: "Falsch. Das passiert beim normalen Aktienkauf nicht, nur bei speziellen Hebelprodukten." }, { text: "Dass man Gebühren zahlen muss", correct: false, rationale: "Falsch. Gebühren sind Kosten, aber nicht das größte Risiko im Vergleich zum Kapitalverlust." }, { text: "Dass man nicht reich wird", correct: false, rationale: "Falsch. Kein Reichtum ist eine enttäuschte Erwartung, aber kein finanzieller Verlust." }] },
                { question: "Was ist der Vorteil einer langfristigen Anlagestrategie ('Buy and Hold')?", answers: [{ text: "Man kann kurzfristige Schwankungen aussitzen", correct: true, rationale: "Langfristig wächst die Wirtschaft tendenziell, wodurch kurzfristige Krisen ausgeglichen werden können." }, { text: "Man muss keine Steuern zahlen", correct: false, rationale: "Falsch. Steuern werden fällig, wenn man mit Gewinn verkauft, egal nach welcher Zeit." }, { text: "Man bekommt höhere Dividenden", correct: false, rationale: "Falsch. Die Dividendenhöhe hängt vom Unternehmen ab, nicht von deiner Haltedauer." }, { text: "Man hat garantiert keine Verluste", correct: false, rationale: "Falsch. Garantien gibt es an der Börse nie, auch nicht bei langfristiger Anlage." }] },
                { question: "Was ist 'Volatilität'?", answers: [{ text: "Wie stark der Kurs einer Aktie schwankt", correct: true, rationale: "Eine hohe Volatilität bedeutet starke Kursausschläge nach oben und unten." }, { text: "Wie schnell eine Aktie verkauft werden kann", correct: false, rationale: "Falsch. Das beschreibt die 'Liquidität' einer Aktie." }, { text: "Die Gesamtanzahl der Aktien eines Unternehmens", correct: false, rationale: "Falsch. Das ist die 'Anzahl der ausstehenden Aktien'." }, { text: "Die Beliebtheit einer Aktie bei Anlegern", correct: false, rationale: "Falsch. Beliebtheit kann die Volatilität beeinflussen, ist aber nicht die Definition." }] },
                { question: "Sollte man sich beim Investieren verschulden?", answers: [{ text: "Nein, auf keinen Fall. Nur Geld investieren, dessen Verlust man verkraften kann.", correct: true, rationale: "Absolut richtig. Investieren auf Kredit ('Hebel') potenziert Verluste und kann zum Ruin führen." }, { text: "Ja, um den Gewinn zu maximieren", correct: false, rationale: "Falsch. Das ist extrem riskant und für Anfänger absolut ungeeignet." }, { text: "Nur, wenn die Bank es erlaubt", correct: false, rationale: "Falsch. Auch wenn eine Bank einen Wertpapierkredit anbietet, ist das Risiko für dich persönlich." }, { text: "Nur für 'sichere' Anlagen wie Blue Chips", correct: false, rationale: "Falsch. Es gibt keine 'sicheren' Aktien. Auch Blue Chips können stark fallen." }] },
            ],
            "Analyse & Kennzahlen": [
                { question: "Was ist die Marktkapitalisierung eines Unternehmens?", answers: [{ text: "Der Gesamtwert aller Aktien des Unternehmens", correct: true, rationale: "Richtig. Sie berechnet sich aus dem Aktienkurs multipliziert mit der Anzahl der Aktien." }, { text: "Der jährliche Gewinn des Unternehmens", correct: false, rationale: "Falsch. Das ist der Gewinn. Die Marktkapitalisierung ist der Börsenwert." }, { text: "Die Schulden des Unternehmens", correct: false, rationale: "Falsch. Schulden sind ein Teil der Bilanz, aber nicht die Marktkapitalisierung." }, { text: "Der Wert der Gebäude und Maschinen", correct: false, rationale: "Falsch. Das ist das Anlagevermögen, ein Teil des Unternehmenswertes, aber nicht der Börsenwert." }] },
                { question: "Unternehmen mit einer hohen Marktkapitalisierung nennt man auch...", answers: [{ text: "Large Caps oder Blue Chips", correct: true, rationale: "Genau. 'Caps' steht für Capitalization (Kapitalisierung). Blue Chips ist ein umgangssprachlicher Begriff für große, etablierte Unternehmen." }, { text: "Small Caps", correct: false, rationale: "Falsch. Small Caps sind Unternehmen mit einer geringen Marktkapitalisierung." }, { text: "Penny Stocks", correct: false, rationale: "Falsch. Penny Stocks sind Aktien, die zu sehr niedrigen Preisen (oft unter 1 Euro) gehandelt werden und extrem spekulativ sind." }, { text: "Start-ups", correct: false, rationale: "Falsch. Ein Start-up ist ein junges Unternehmen, das nicht zwingend börsennotiert sein muss." }] },
                { question: "Was sagt das Kurs-Gewinn-Verhältnis (KGV) aus?", answers: [{ text: "Wie ein Unternehmen im Verhältnis zu seinem Gewinn bewertet ist", correct: true, rationale: "Korrekt. Ein niedriges KGV kann auf eine günstige Bewertung hindeuten, ist aber nicht das einzige Kriterium." }, { text: "Wie viel Gewinn eine Aktie pro Jahr abwirft", correct: false, rationale: "Falsch. Das wäre die Gewinnrendite (1/KGV)." }, { text: "Das Verhältnis von Aktienkurs zu Dividende", correct: false, rationale: "Falsch. Das wäre die Dividendenrendite." }, { text: "Wie oft eine Aktie den Besitzer wechselt", correct: false, rationale: "Falsch. Das hat nichts mit dem KGV zu tun." }] },
                { question: "Was ist der Unterschied zwischen fundamentaler und technischer Analyse?", answers: [{ text: "Fundamentalanalyse betrachtet Unternehmensdaten, technische Analyse den Chart", correct: true, rationale: "Genau. Fundamentalisten suchen 'was' sie kaufen sollen, Techniker 'wann'." }, { text: "Fundamentalanalyse ist für Profis, technische Analyse für Anfänger", correct: false, rationale: "Falsch. Beide Ansätze werden von allen Arten von Anlegern genutzt und erfordern Wissen." }, { text: "Fundamentalanalyse ist kurzfristig, technische Analyse ist langfristig", correct: false, rationale: "Falsch. Oft ist es umgekehrt: Technische Analyse wird oft für kurzfristiges Timing genutzt." }, { text: "Fundamentalanalyse ist sicherer als technische Analyse", correct: false, rationale: "Falsch. Beide Methoden haben ihre Vor- und Nachteile und bieten keine Garantien." }] },
                { question: "Was ist die Dividendenrendite?", answers: [{ text: "Das Verhältnis der Dividende zum Aktienkurs in Prozent", correct: true, rationale: "Richtig. Sie zeigt, wie hoch die 'Verzinsung' der Aktie allein durch die Dividende ist." }, { text: "Die absolute Höhe der Dividende in Euro", correct: false, rationale: "Falsch. Das ist die Dividende pro Aktie, aber nicht die Rendite." }, { text: "Der Kursgewinn plus die Dividende", correct: false, rationale: "Falsch. Das wäre die Gesamtrendite." }, { text: "Wie oft ein Unternehmen die Dividende erhöht hat", correct: false, rationale: "Falsch. Das ist die Dividendenhistorie, aber nicht die aktuelle Rendite." }] },
            ],
            "Praktischer Handel": [
                { question: "Was ist ein Sparplan?", answers: [{ text: "Ein Dauerauftrag, mit dem man regelmäßig einen festen Betrag investiert", correct: true, rationale: "Korrekt. Das automatisiert das Sparen und man profitiert vom Durchschnittskosteneffekt." }, { text: "Ein spezielles, hochverzinstes Sparkonto", correct: false, rationale: "Falsch. Es ist eine Investitionsmethode in Wertpapiere, kein Sparkonto." }, { text: "Ein Plan, um die Ausgaben zu senken", correct: false, rationale: "Falsch. Das ist ein Haushaltsplan. Ein Sparplan investiert das gesparte Geld." }, { text: "Eine garantierte Methode, um schnell reich zu werden", correct: false, rationale: "Falsch. Es ist eine solide, langfristige Strategie, aber keine Garantie und nicht schnell." }] },
                { question: "Was ist eine 'Market-Order'?", answers: [{ text: "Ein Auftrag, der zum nächstbesten verfügbaren Preis ausgeführt wird", correct: true, rationale: "Richtig. Es wird sofort ausgeführt, aber man hat keine Kontrolle über den genauen Preis." }, { text: "Ein Auftrag, der nur zu einem bestimmten, festgelegten Preis ausgeführt wird", correct: false, rationale: "Falsch. Das wäre eine 'Limit-Order'." }, { text: "Ein Auftrag, der nur am Wochenende platziert werden kann", correct: false, rationale: "Falsch. Order können jederzeit platziert, aber nur zu Handelszeiten ausgeführt werden." }, { text: "Ein Auftrag, der den ganzen Markt aufkauft", correct: false, rationale: "Falsch. Das wäre wohl etwas zu teuer. Es ist eine Art der Auftragsausführung." }] },
                { question: "Was ist eine 'Limit-Order'?", answers: [{ text: "Ein Auftrag, der nur zu einem von dir festgelegten Preis (oder besser) ausgeführt wird", correct: true, rationale: "Genau. Man hat die Kontrolle über den Preis, aber keine Garantie für die Ausführung." }, { text: "Ein Auftrag, der sofort zum besten Preis ausgeführt wird", correct: false, rationale: "Falsch. Das wäre eine 'Market-Order'." }, { text: "Ein Auftrag, der die Anzahl der Aktien limitiert, die man kaufen kann", correct: false, rationale: "Falsch. Man legt den Preis fest, nicht die maximale Anzahl." }, { text: "Ein Auftrag, der nur für eine begrenzte Zeit gültig ist", correct: false, rationale: "Falsch. Man kann eine Gültigkeit festlegen, aber die Definition ist der Preis." }] },
                { question: "Was ist ein 'Stop-Loss-Order'?", answers: [{ text: "Ein Verkaufsauftrag, der bei Erreichen eines Kurses automatisch ausgelöst wird, um Verluste zu begrenzen", correct: true, rationale: "Genau. Er dient zur Begrenzung von Verlusten, kann sie aber nicht garantieren." }, { text: "Ein Auftrag, der den Handel stoppt, wenn man zu viel verliert", correct: false, rationale: "Falsch. Er stoppt nicht den Handel, sondern verkauft eine bestimmte Position." }, { text: "Ein Kaufauftrag für sehr günstige Aktien", correct: false, rationale: "Falsch. Es ist ein Verkaufsauftrag zur Risikobegrenzung." }, { text: "Ein Auftrag, der Verluste verhindert", correct: false, rationale: "Falsch. Er kann Verluste nicht verhindern, nur begrenzen. Bei schnellen Kursstürzen kann der Verkaufspreis auch unter dem Stop-Preis liegen." }] },
                { question: "Was ist der 'Spread' (Geld-Brief-Spanne)?", answers: [{ text: "Der Unterschied zwischen dem Kauf- und Verkaufskurs", correct: true, rationale: "Korrekt. Ein kleiner Spread ist ein Zeichen für hohe Liquidität und geringere indirekte Handelskosten." }, { text: "Die Streuung der Aktien in einem ETF", correct: false, rationale: "Falsch. Das ist die Diversifikation." }, { text: "Eine spezielle Steuer für Trader", correct: false, rationale: "Falsch. Es sind implizite Kosten, keine Steuer." }, { text: "Der durchschnittliche Gewinn einer Aktie", correct: false, rationale: "Falsch. Der Gewinn ist die Rendite, nicht der Spread." }] },
            ],
            "Recht & Steuern": [
                { question: "Was ist 'Insiderhandel' und warum ist es verboten?", answers: [{ text: "Der Handel auf Basis von vertraulichen, nicht-öffentlichen Informationen", correct: true, rationale: "Korrekt. Es ist verboten, weil es unfair gegenüber anderen Anlegern ist, die diese Informationen nicht haben." }, { text: "Wenn man Aktien einer Firma kauft, deren Produkte man gut kennt", correct: false, rationale: "Falsch. Das ist völlig legal und eine legitime Anlagestrategie ('Invest in what you know')." }, { text: "Wenn man Aktien kauft, weil ein Freund sie empfohlen hat", correct: false, rationale: "Falsch. Das ist erlaubt, solange der Freund kein Insider mit geheimen Informationen ist." }, { text: "Wenn man Aktien außerhalb der Börsenöffnungszeiten handelt", correct: false, rationale: "Falsch. Das ist als außerbörslicher Handel möglich und nicht illegal." }] },
                { question: "Muss man auf Gewinne aus Aktienverkäufen Steuern zahlen?", answers: [{ text: "Ja, in Deutschland fällt auf Kapitalerträge die Abgeltungssteuer an", correct: true, rationale: "Richtig. Gewinne aus Zinsen, Dividenden und Kursgewinnen müssen versteuert werden (oberhalb eines Freibetrags)." }, { text: "Nein, Aktiengewinne sind immer steuerfrei", correct: false, rationale: "Falsch. Das war früher unter bestimmten Bedingungen so, gilt aber heute nicht mehr." }, { text: "Nur, wenn man mehr als 10.000 Euro Gewinn macht", correct: false, rationale: "Falsch. Die Steuerpflicht beginnt schon nach dem Sparer-Pauschbetrag (aktuell 1.000€ für Ledige)." }, { text: "Nur, wenn man die Aktien weniger als ein Jahr gehalten hat", correct: false, rationale: "Falsch. Die Haltedauer spielt für die Steuerpflicht bei nach 2009 gekauften Aktien keine Rolle mehr." }] },
                { question: "Welche Behörde überwacht den Wertpapierhandel in Deutschland?", answers: [{ text: "Die BaFin (Bundesanstalt für Finanzdienstleistungsaufsicht)", correct: true, rationale: "Korrekt. Die BaFin achtet darauf, dass an den Finanzmärkten alles mit rechten Dingen zugeht." }, { text: "Die Deutsche Bundesbank", correct: false, rationale: "Falsch. Die Bundesbank ist die Zentralbank, die sich um die Geldpolitik kümmert." }, { text: "Die Polizei", correct: false, rationale: "Falsch. Die Polizei ermittelt bei Straftaten, aber die präventive Überwachung macht die BaFin." }, { text: "Die Schufa", correct: false, rationale: "Falsch. Die Schufa sammelt Daten zur Kreditwürdigkeit von Privatpersonen." }] },
                { question: "Als 14-Jähriger möchtest du ein Depot eröffnen. Was ist zwingend notwendig?", answers: [{ text: "Die Zustimmung und Mitwirkung deiner Eltern", correct: true, rationale: "Korrekt. Da du noch nicht voll geschäftsfähig bist, müssen deine Eltern das Depot (als Junior-Depot) für dich eröffnen." }, { text: "Du musst es selbst online machen", correct: false, rationale: "Falsch. Das ist aus rechtlichen Gründen nicht möglich." }, { text: "Ein Startkapital von mindestens 5.000 Euro", correct: false, rationale: "Falsch. Die meisten Broker haben keine oder nur sehr geringe Mindestanlagesummen." }, { text: "Ein bestandener Test bei der Bank", correct: false, rationale: "Falsch. Ein Test ist nicht vorgeschrieben, die Zustimmung der Eltern ist der entscheidende Punkt." }] },
                { question: "Was ist 'Sondervermögen' bei Fonds und ETFs?", answers: [{ text: "Das Geld der Anleger ist rechtlich vom Vermögen der Fondsgesellschaft getrennt und geschützt", correct: true, rationale: "Korrekt. Geht die Fondsgesellschaft pleite, ist das Geld der Anleger im Fonds geschützt. Das ist ein riesiger Vorteil." }, { text: "Ein spezieller Fonds für besonders reiche Kunden", correct: false, rationale: "Falsch. Es ist ein rechtlicher Schutzmechanismus für alle Anleger." }, { text: "Geld, das für besondere Zwecke gespendet wird", correct: false, rationale: "Falsch. Es bleibt das Eigentum der Anleger." }, { text: "Ein Fonds, der nur in sehr riskante 'Sonderfälle' investiert", correct: false, rationale: "Falsch. Es ist ein Sicherheitsmerkmal, kein Anlageschwerpunkt." }] },
            ],
            "Psychologie & Verhalten": [
                { question: "Warum sind Emotionen wie Angst und Gier an der Börse gefährlich?", answers: [{ text: "Sie führen zu unüberlegten, irrationalen Entscheidungen", correct: true, rationale: "Korrekt. Angst führt zum Verkauf bei Tiefstkursen, Gier zum Kauf bei Höchstkursen." }, { text: "Sie sind gesetzlich verboten", correct: false, rationale: "Falsch. Emotionen sind menschlich und nicht verboten, aber man sollte sie kontrollieren." }, { text: "Sie senken die Handelsgebühren", correct: false, rationale: "Falsch. Emotionen haben keinen Einfluss auf die Gebührenstruktur eines Brokers." }, { text: "Sie garantieren hohe Gewinne", correct: false, rationale: "Falsch. Das Gegenteil ist der Fall, sie führen oft zu Verlusten." }] },
                { question: "Was bedeutet 'FOMO' an der Börse?", answers: [{ text: "'Fear Of Missing Out' - die Angst, einen Gewinn zu verpassen", correct: true, rationale: "Richtig. Diese Angst führt oft dazu, dass Anleger in bereits stark gestiegene, überhitzte Aktien einsteigen." }, { text: "Eine Anlagestrategie für mutige Investoren", correct: false, rationale: "Falsch. Es ist ein psychologischer Fallstrick, keine Strategie." }, { text: "Ein technischer Indikator im Chart", correct: false, rationale: "Falsch. Es ist eine Emotion, kein Indikator." }, { text: "Eine Abkürzung für eine Börsenaufsichtsbehörde", correct: false, rationale: "Falsch. Es ist ein umgangssprachlicher Begriff aus dem Englischen." }] },
                { question: "Was ist das 'Herdenverhalten' bei Anlegern?", answers: [{ text: "Die Tendenz, das zu tun, was die meisten anderen auch tun", correct: true, rationale: "Korrekt. Das kann Blasen oder Panikverkäufe verstärken und ist selten eine gute Idee." }, { text: "Sich in Foren über Aktien auszutauschen", correct: false, rationale: "Falsch. Austausch ist gut, aber blind der Masse zu folgen, ist gefährlich." }, { text: "Nur in Agrar-Aktien zu investieren", correct: false, rationale: "Falsch. Das hat nichts mit dem Begriff zu tun." }, { text: "Eine Strategie, bei der man immer auf den Marktführer setzt", correct: false, rationale: "Falsch. Das kann eine Strategie sein, aber Herdenverhalten ist die unreflektierte Nachahmung." }] },
                { question: "Ein Freund erzählt dir von einer 'todsicheren' Aktie. Wie reagierst du?", answers: [{ text: "Skeptisch bleiben, eigene Recherchen anstellen und die Risiken prüfen", correct: true, rationale: "Sehr gut. 'Todsichere' Tipps gibt es nicht. Mache immer deine eigenen Hausaufgaben." }, { text: "Sofort mein ganzes Taschengeld investieren", correct: false, rationale: "Falsch. Das wäre extrem riskant und von Gier getrieben." }, { text: "Den Freund bitten, für mich zu investieren", correct: false, rationale: "Falsch. Du solltest immer selbst die Kontrolle und Verantwortung für dein Geld behalten." }, { text: "Die Information ignorieren, weil Freunde immer lügen", correct: false, rationale: "Falsch. Ignorieren ist eine Option, aber die Quelle kritisch zu prüfen ist noch besser." }] },
                { question: "Ist die vergangene Performance einer Aktie eine Garantie für die Zukunft?", answers: [{ text: "Nein, auf keinen Fall. Vergangene Ergebnisse sind kein Indikator für zukünftige Renditen.", correct: true, rationale: "Das ist einer der wichtigsten Grundsätze. Die Zukunft ist immer ungewiss." }, { text: "Ja, was gut lief, wird immer gut laufen", correct: false, rationale: "Falsch. Das ist ein gefährlicher Trugschluss. Unternehmen und Märkte verändern sich." }, { text: "Meistens schon, aber nicht immer", correct: false, rationale: "Falsch. Man kann sich nicht darauf verlassen, es ist keine verlässliche Prognose." }, { text: "Nur wenn die Aktie in einem Index ist", correct: false, rationale: "Falsch. Auch Index-Aktien können fallen." }] },
            ]
        };

        // DOM Elements
        const questionArea = document.getElementById('question-area');
        const questionText = document.getElementById('question-text');
        const questionCounter = document.getElementById('question-counter');
        const optionsContainer = document.getElementById('options-container');
        const feedbackText = document.getElementById('feedback-text');
        const nextBtn = document.getElementById('next-btn');
        const progressBar = document.getElementById('progress-bar');
        
        const resultsScreen = document.getElementById('results-screen');
        const scorePercentage = document.getElementById('score-percentage');
        const topicResultsContainer = document.getElementById('topic-results-container');
        const restartBtn = document.getElementById('restart-btn');
        const navigationDiv = document.getElementById('navigation');

        // State
        let flatQuizData = [];
        let topicScores = {};
        let currentQuestionIndex = 0;
        
        function setupQuiz() {
            flatQuizData = [];
            Object.keys(quizTopics).forEach(topic => {
                quizTopics[topic].forEach(question => {
                    flatQuizData.push({ ...question, topic: topic });
                });
            });
            shuffleArray(flatQuizData);

            topicScores = {};
            Object.keys(quizTopics).forEach(topic => {
                topicScores[topic] = { correct: 0, total: quizTopics[topic].length };
            });
        }
        
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function startQuiz() {
            setupQuiz();
            currentQuestionIndex = 0;
            resultsScreen.style.display = 'none';
            questionArea.style.display = 'block';
            navigationDiv.style.display = 'block';
            nextBtn.style.display = 'none';
            showQuestion();
        }

        function showQuestion() {
            resetState();
            if (currentQuestionIndex < flatQuizData.length) {
                const question = flatQuizData[currentQuestionIndex];
                questionText.innerText = question.question;
                questionCounter.innerText = `Frage ${currentQuestionIndex + 1} / ${flatQuizData.length}`;
                progressBar.style.width = `${((currentQuestionIndex + 1) / flatQuizData.length) * 100}%`;

                const shuffledAnswers = [...question.answers];
                shuffleArray(shuffledAnswers);

                shuffledAnswers.forEach(answer => {
                    const button = document.createElement('button');
                    button.innerHTML = answer.text;
                    button.classList.add('option-btn');
                    button.dataset.correct = answer.correct;
                    button.dataset.rationale = answer.rationale;
                    button.addEventListener('click', selectAnswer, { once: true });
                    optionsContainer.appendChild(button);
                });
            }
        }

        function resetState() {
            nextBtn.style.display = 'none';
            feedbackText.style.display = 'none';
            feedbackText.className = 'feedback-text';
            optionsContainer.innerHTML = ''; // Clear previous options
        }

        function selectAnswer(e) {
            const selectedBtn = e.currentTarget;
            const correct = selectedBtn.dataset.correct === 'true';
            const currentTopic = flatQuizData[currentQuestionIndex].topic;

            Array.from(optionsContainer.children).forEach(button => {
                const isCorrect = button.dataset.correct === 'true';
                if (isCorrect) {
                    button.classList.add('correct');
                }
                button.disabled = true;
            });
            
            if (correct) {
                topicScores[currentTopic].correct++;
                feedbackText.innerHTML = `<strong>✅ Richtig!</strong> ${selectedBtn.dataset.rationale}`;
                feedbackText.classList.add('correct');
            } else {
                selectedBtn.classList.add('incorrect');
                const correctButton = optionsContainer.querySelector('[data-correct="true"]');
                feedbackText.innerHTML = `<strong>❌ Falsch.</strong> ${correctButton.dataset.rationale}`;
                feedbackText.classList.add('incorrect');
            }
            feedbackText.style.display = 'block';

            if (flatQuizData.length > currentQuestionIndex + 1) {
                nextBtn.innerText = 'Weiter';
            } else {
                nextBtn.innerText = 'Ergebnis anzeigen';
            }
            nextBtn.style.display = 'inline-block';
        }
        
        function showResults() {
            questionArea.style.display = 'none';
            navigationDiv.style.display = 'none';
            resultsScreen.style.display = 'block';
            
            let totalCorrect = 0;
            Object.values(topicScores).forEach(topic => {
                totalCorrect += topic.correct;
            });
            const overallPercentage = Math.round((totalCorrect / flatQuizData.length) * 100);
            scorePercentage.innerText = `${overallPercentage}%`;
            
            topicResultsContainer.innerHTML = '';
            
            Object.keys(topicScores).forEach(topic => {
                const topicData = topicScores[topic];
                const percentage = topicData.total > 0 ? Math.round((topicData.correct / topicData.total) * 100) : 0;
                
                const topicDiv = document.createElement('div');
                topicDiv.classList.add('topic-result');
                topicDiv.innerHTML = `
                    <div class="topic-header">
                        <span class="topic-name">${topic}</span>
                        <span class="topic-score">${topicData.correct} / ${topicData.total}</span>
                    </div>
                    <div class="topic-progress-bar-container">
                        <div class="topic-progress-bar" style="width: ${percentage}%;"></div>
                    </div>
                `;
                topicResultsContainer.appendChild(topicDiv);
            });
        }

        nextBtn.addEventListener('click', () => {
            if (flatQuizData.length > currentQuestionIndex + 1) {
                 currentQuestionIndex++;
                 showQuestion();
            } else {
                showResults();
            }
        });
        
        restartBtn.addEventListener('click', startQuiz);

        // Initial call to start the quiz
        document.addEventListener('DOMContentLoaded', (event) => {
            startQuiz();
        });
    </script>
</body>
</html>
