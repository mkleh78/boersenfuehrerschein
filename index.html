<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trader-Lizenz | Die Challenge</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&family=Roboto:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --jo-dark-blue: #0A192F;
            --jo-light-blue: #172A45;
            --jo-text-light: #CCD6F6;
            --jo-text-mid: #8892B0;
            --jo-accent-orange: #FF8C00; /* DarkOrange */
            --jo-accent-green: #2ecc71;
            --jo-accent-red: #e74c3c;
            --border-color: #233554;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background-color: var(--jo-dark-blue);
            color: var(--jo-text-light);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 15px;
        }

        #quiz-container {
            background-color: var(--jo-light-blue);
            border-radius: 10px;
            box-shadow: 0 10px 30px -15px rgba(2,12,27,0.7);
            width: 100%;
            max-width: 850px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        #quiz-header {
            background-color: transparent;
            padding: 25px 30px;
            border-bottom: 1px solid var(--border-color);
        }

        h1 {
            margin: 0;
            font-family: 'Roboto', sans-serif;
            font-size: 2em;
            font-weight: 700;
            color: white;
            text-align: center;
        }

        h1 span {
            color: var(--jo-accent-orange);
        }

        #question-area {
            padding: 30px;
        }

        #progress-container {
             display: flex;
             align-items: center;
             gap: 15px;
             margin-bottom: 25px;
        }

        #question-counter {
            font-size: 0.9em;
            font-weight: 600;
            color: var(--jo-text-mid);
            white-space: nowrap;
        }
        
        #progress-bar-container {
            width: 100%;
            background-color: var(--border-color);
            border-radius: 10px;
            height: 10px;
        }

        #progress-bar {
            width: 0%;
            height: 100%;
            background-color: var(--jo-accent-orange);
            border-radius: 10px;
            transition: width 0.4s ease-in-out;
        }

        #question-text {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 30px;
            color: white;
            line-height: 1.5;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .option-btn {
            width: 100%;
            padding: 15px;
            font-size: 1em;
            font-weight: 600;
            background-color: transparent;
            color: var(--jo-text-light);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s ease;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--jo-accent-orange);
            color: var(--jo-accent-orange);
        }

        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .option-btn.correct {
            border-color: var(--jo-accent-green);
            background-color: rgba(46, 204, 113, 0.1);
            color: var(--jo-accent-green);
        }

        .option-btn.incorrect {
            border-color: var(--jo-accent-red);
            background-color: rgba(231, 76, 60, 0.1);
            color: var(--jo-accent-red);
        }

        #feedback-text {
            margin-top: 25px;
            font-size: 1em;
            font-weight: 600;
            padding: 15px;
            border-radius: 8px;
            display: none;
            line-height: 1.5;
        }

        #feedback-text.correct {
            border: 1px solid var(--jo-accent-green);
            color: var(--jo-accent-green);
            display: block;
        }

        #feedback-text.incorrect {
            border: 1px solid var(--jo-accent-red);
            color: var(--jo-accent-red);
            display: block;
        }

        #navigation {
            padding: 25px 30px;
            text-align: right;
            border-top: 1px solid var(--border-color);
        }

        #next-btn {
            padding: 12px 35px;
            font-size: 1em;
            font-weight: 700;
            background-color: var(--jo-accent-orange);
            color: var(--jo-light-blue);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: none;
        }

        #next-btn:hover {
            filter: brightness(1.2);
        }

        #results-screen {
            padding: 40px;
            text-align: center;
        }
        
        #results-screen h2 {
            font-size: 2.5em;
            font-weight: 700;
            color: white;
            margin-bottom: 15px;
        }
        
        #overall-score-text {
            font-size: 1.2em;
            color: var(--jo-text-mid);
            margin-bottom: 5px;
        }

        #score-percentage {
            font-family: 'Roboto', sans-serif;
            font-size: 4em;
            font-weight: 700;
            color: var(--jo-accent-orange);
            margin-bottom: 25px;
        }

        #topic-results-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            text-align: left;
            margin-top: 30px;
        }
        .topic-result {
            background-color: var(--jo-dark-blue);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        .topic-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .topic-name {
            font-weight: 700;
            color: white;
        }
        .topic-score {
            font-weight: 600;
            color: var(--jo-text-mid);
        }
        .topic-progress-bar-container {
            width: 100%;
            background-color: var(--border-color);
            height: 8px;
            border-radius: 5px;
        }
        .topic-progress-bar {
            height: 100%;
            background-color: var(--jo-accent-orange);
            border-radius: 5px;
        }


        #restart-btn {
            padding: 15px 40px;
            font-size: 1.1em;
            font-weight: 700;
            background-color: var(--jo-accent-orange);
            color: var(--jo-light-blue);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 40px;
        }
        #restart-btn:hover {
            filter: brightness(1.2);
        }

        @media (max-width: 700px) {
            body { padding: 0; }
            #quiz-container {
                border-radius: 0;
                border: none;
                min-height: 100vh;
            }
            .options-grid { grid-template-columns: 1fr; }
            h1 { font-size: 1.8em; }
            #question-text { font-size: 1.15em; }
            #topic-results-container { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div id="quiz-container">
        <div id="quiz-header">
            <h1>Trader-Lizenz<span> | Die Challenge</span></h1>
        </div>
        
        <div id="question-area">
            <div id="progress-container">
                <div id="question-counter"></div>
                <div id="progress-bar-container">
                    <div id="progress-bar"></div>
                </div>
            </div>
            <div id="question-text">Lädt Frage...</div>
            <div class="options-grid" id="options-container"></div>
            <div id="feedback-text"></div>
        </div>
        
        <div id="navigation">
            <button id="next-btn">Weiter</button>
        </div>

        <div id="results-screen" style="display: none;">
            <h2>Challenge abgeschlossen!</h2>
            <p id="overall-score-text">Dein Gesamtergebnis</p>
            <div id="score-percentage"></div>
            <hr style="border-color: var(--border-color); margin: 30px 0;">
            <h3>Leistung nach Themenfeld</h3>
            <div id="topic-results-container"></div>
            <button id="restart-btn">Neue Runde starten</button>
        </div>
    </div>

    <script>
        const quizTopics = {
            "Grundlagen & Begriffe": [
                { question: "Was ist eine Aktie?", answers: [{ text: "Ein Anteil an einem Unternehmen", correct: true }, { text: "Ein Schuldschein von einer Bank", correct: false }, { text: "Ein fester Zins, den man jährlich bekommt", correct: false }, { text: "Ein Lottoschein für die Börse", correct: false }] },
                { question: "Was ist die Börse?", answers: [{ text: "Ein organisierter Markt, an dem Wertpapiere gehandelt werden", correct: true }, { text: "Ein Supermarkt für Geld", correct: false }, { text: "Ein Ort, an dem nur reiche Leute handeln", correct: false }, { text: "Eine staatliche Behörde zur Kontrolle der Wirtschaft", correct: false }] },
                { question: "Wer legt den Preis einer Aktie fest?", answers: [{ text: "Angebot und Nachfrage", correct: true }, { text: "Das Unternehmen selbst", correct: false }, { text: "Die Regierung", correct: false }, { text: "Die Bank des Käufers", correct: false }] },
                { question: "Was ist ein 'Depot'?", answers: [{ text: "Ein Konto zur Aufbewahrung von Wertpapieren", correct: true }, { text: "Ein spezielles Sparkonto", correct: false }, { text: "Der Tresorraum einer Börse", correct: false }, { text: "Ein Synonym für das Girokonto", correct: false }] },
                { question: "Was ist ein 'Broker'?", answers: [{ text: "Eine Bank oder ein Finanzdienstleister, über den du handelst", correct: true }, { text: "Ein Berater, der dir sagt, was du kaufen sollst", correct: false }, { text: "Eine Person, die die Aktienkurse festlegt", correct: false }, { text: "Die Börsenaufsicht", correct: false }] },
                { question: "Was bedeutet die Abkürzung 'AG' im Namen eines Unternehmens?", answers: [{ text: "Aktiengesellschaft", correct: true }, { text: "Arbeitsgemeinschaft", correct: false }, { text: "Allgemeine Gesellschaft", correct: false }, { text: "Anlagegesellschaft", correct: false }] },
                { question: "Was ist ein 'Portfolio'?", answers: [{ text: "Die Gesamtheit aller Wertpapiere, die ein Anleger besitzt", correct: true }, { text: "Ein Aktenordner zur Aufbewahrung von Dokumenten", correct: false }, { text: "Die Lieblingsaktie eines Anlegers", correct: false }, { text: "Der jährliche Bericht eines Unternehmens", correct: false }] },
                { question: "Was ist der Unterschied zwischen dem Nominalwert und dem Kurswert einer Aktie?", answers: [{ text: "Der Nominalwert ist ein fester Anteil am Grundkapital, der Kurswert ist der Marktpreis", correct: true }, { text: "Der Nominalwert ist der Preis für Profis, der Kurswert für Private", correct: false }, { text: "Der Kurswert ist immer höher als der Nominalwert", correct: false }, { text: "Es gibt keinen Unterschied", correct: false }] },
                 { question: "Was bedeutet es, wenn ein ETF 'thesaurierend' ist?", answers: [{ text: "Er schüttet Dividenden nicht aus, sondern reinvestiert sie direkt wieder", correct: true }, { text: "Er spendet die Dividenden für einen guten Zweck", correct: false }, { text: "Er zahlt die Dividenden monatlich auf dein Konto aus", correct: false }, { text: "Er investiert nur in Schatzbriefe", correct: false }] },
                { question: "Was bedeutet 'Allzeithoch' (All-Time High)?", answers: [{ text: "Der höchste Kurs, den eine Aktie oder ein Index jemals erreicht hat", correct: true }, { text: "Wenn alle Aktien gleichzeitig steigen", correct: false }, { text: "Der höchste Kurs des aktuellen Jahres", correct: false }, { text: "Ein Signal, sofort zu verkaufen", correct: false }] },
            ],
            "Produkte & Indizes": [
                { question: "Was ist ein ETF (Exchange Traded Fund)?", answers: [{ text: "Ein Fonds, der einen Index wie den DAX abbildet und an der Börse gehandelt wird", correct: true }, { text: "Eine einzelne, sehr teure Aktie", correct: false }, { text: "Eine spezielle Art von Sparkonto", correct: false }, { text: "Eine Garantie, dass man kein Geld verliert", correct: false }] },
                { question: "Was ist eine Dividende?", answers: [{ text: "Ein Teil des Unternehmensgewinns, der an Aktionäre ausgeschüttet wird", correct: true }, { text: "Die Gebühr für den Kauf einer Aktie", correct: false }, { text: "Der Verlust, den man macht, wenn der Kurs fällt", correct: false }, { text: "Ein Rabatt beim Kauf von vielen Aktien", correct: false }] },
                { question: "Was ist der DAX?", answers: [{ text: "Der wichtigste deutsche Aktienindex mit den 40 größten Unternehmen", correct: true }, { text: "Ein Gesetz zum Aktienhandel", correct: false }, { text: "Die Börse in Frankfurt", correct: false }, { text: "Ein Computerprogramm, das vor Betrug warnt", correct: false }] },
                { question: "Was ist der Unterschied zwischen einer Aktie und einer Anleihe?", answers: [{ text: "Aktie = Eigentum, Anleihe = Kredit", correct: true }, { text: "Aktien haben feste Zinsen, Anleihen nicht", correct: false }, { text: "Anleihen sind riskanter als Aktien", correct: false }, { text: "Man kann nur Aktien an der Börse handeln", correct: false }] },
                { question: "Was ist der MSCI World?", answers: [{ text: "Ein weltweiter Aktienindex mit über 1.500 Unternehmen aus Industrieländern", correct: true }, { text: "Der Verband aller Börsen weltweit", correct: false }, { text: "Ein Fonds, der nur in Technologie-Aktien investiert", correct: false }, { text: "Eine Währung für den internationalen Handel", correct: false }] },
                { question: "Was ist der S&P 500 Index?", answers: [{ text: "Ein Index, der die 500 größten börsennotierten US-Unternehmen umfasst", correct: true }, { text: "Ein Index für die 500 besten Unternehmen der Welt", correct: false }, { text: "Eine Liste von 500 empfohlenen Aktien", correct: false }, { text: "Ein Index, der von 500 Analysten bewertet wird", correct: false }] },
                { question: "Was sind 'Rohstoffe' als Anlageklasse?", answers: [{ text: "Physische Güter wie Gold, Öl oder Weizen", correct: true }, { text: "Die Roh-Version einer Aktie", correct: false }, { text: "Unternehmen, die noch nicht an der Börse sind", correct: false }, { text: "Besonders riskante Aktien", correct: false }] },
                { question: "Was ist ein 'Zertifikat' im Wertpapierhandel?", answers: [{ text: "Eine Schuldverschreibung, deren Wertentwicklung von einem Basiswert abhängt", correct: true }, { text: "Ein Eigentumsnachweis für eine Aktie", correct: false }, { text: "Eine Urkunde, die man nach einem Quiz bekommt", correct: false }, { text: "Eine garantierte Anleihe", correct: false }] },
                { question: "Was ist ein 'REIT' (Real Estate Investment Trust)?", answers: [{ text: "Ein Unternehmen, das Immobilien besitzt, betreibt oder finanziert und an der Börse gehandelt wird", correct: true }, { text: "Ein Makler für sehr teure Immobilien", correct: false }, { text: "Eine Steuer auf Immobilienbesitz", correct: false }, { text: "Ein rechter Winkel im Immobilienbau", correct: false }] },
                { question: "Was ist der Unterschied zwischen einer Stammaktie und einer Vorzugsaktie?", answers: [{ text: "Stammaktien haben ein Stimmrecht, Vorzugsaktien oft eine höhere Dividende", correct: true }, { text: "Stammaktien sind für Stammkunden, Vorzugsaktien für Neukunden", correct: false }, { text: "Vorzugsaktien sind sicherer als Stammaktien", correct: false }, { text: "Stammaktien kann jeder kaufen, Vorzugsaktien nur Profis", correct: false }] },
            ],
            "Markt & Wirtschaft": [
                { question: "Was ist Inflation?", answers: [{ text: "Der Wert des Geldes sinkt und die Preise steigen", correct: true }, { text: "Dass Aktienkurse immer nur steigen", correct: false }, { text: "Eine spezielle Steuer auf Aktiengewinne", correct: false }, { text: "Ein Konjunkturabschwung", correct: false }] },
                { question: "Was beschreibt einen 'Bullenmarkt' (Hausse)?", answers: [{ text: "Eine Phase mit allgemein steigenden Kursen", correct: true }, { text: "Eine Phase mit allgemein fallenden Kursen", correct: false }, { text: "Ein Markt mit sehr wenigen Händlern", correct: false }, { text: "Ein Markt für Agrarprodukte wie Rindfleisch", correct: false }] },
                { question: "Was beschreibt einen 'Bärenmarkt' (Baisse)?", answers: [{ text: "Eine Phase mit allgemein fallenden Kursen", correct: true }, { text: "Eine Phase mit allgemein steigenden Kursen", correct: false }, { text: "Ein Markt, der nur nachts geöffnet ist", correct: false }, { text: "Ein Markt mit strengen Regeln", correct: false }] },
                { question: "Wie können sich Zinserhöhungen durch die Zentralbank auf den Aktienmarkt auswirken?", answers: [{ text: "Sie können Aktienkurse belasten, weil Sparen attraktiver wird", correct: true }, { text: "Sie führen immer zu steigenden Aktienkursen", correct: false }, { text: "Sie haben keinen Einfluss auf den Aktienmarkt", correct: false }, { text: "Sie verbilligen den Aktienkauf", correct: false }] },
                { question: "Was ist eine Rezession?", answers: [{ text: "Eine Phase, in der die Wirtschaftsleistung eines Landes schrumpft", correct: true }, { text: "Ein Börsencrash", correct: false }, { text: "Wenn die Inflation sehr hoch ist", correct: false }, { text: "Wenn die Regierung die Steuern erhöht", correct: false }] },
                { question: "Was ist ein 'Börsencrash'?", answers: [{ text: "Ein plötzlicher, extremer Einbruch der Aktienkurse in kurzer Zeit", correct: true }, { text: "Wenn die Computer der Börse ausfallen", correct: false }, { text: "Ein Tag, an dem nur Verluste gemacht werden", correct: false }, { text: "Wenn eine einzelne Aktie stark fällt", correct: false }] },
                { question: "Was ist ein 'IPO' (Initial Public Offering)?", answers: [{ text: "Der erstmalige Verkauf der Aktien eines Unternehmens an der Börse", correct: true }, { text: "Eine große Werbekampagne für ein neues Produkt", correct: false }, { text: "Wenn ein Unternehmen von der Börse genommen wird", correct: false }, { text: "Eine jährliche Versammlung der Aktionäre", correct: false }] },
                { question: "Was sind 'zyklische' Aktien?", answers: [{ text: "Aktien von Unternehmen, deren Geschäft stark von der Konjunktur abhängt", correct: true }, { text: "Aktien, die sich im Kreis drehen", correct: false }, { text: "Aktien, die jeden Monat eine Dividende zahlen", correct: false }, { text: "Aktien von Fahrradherstellern", correct: false }] },
                { question: "Was sind 'defensive' Aktien?", answers: [{ text: "Aktien von Unternehmen mit stabilen Geschäften, die weniger von der Konjunktur abhängen", correct: true }, { text: "Aktien von Rüstungsunternehmen", correct: false }, { text: "Aktien, die nie im Wert fallen", correct: false }, { text: "Aktien mit einer Verlust-Garantie", correct: false }] },
                { question: "Was ist eine 'Blase' an der Börse?", answers: [{ text: "Eine Phase, in der die Preise weit über ihren fundamentalen Wert steigen", correct: true }, { text: "Eine Schutzhülle um das Depot", correct: false }, { text: "Ein sehr sicherer Hafen für Geld", correct: false }, { text: "Ein Unternehmen, das Seifenblasen herstellt", correct: false }] },
            ],
            "Strategie & Risiko": [
                { question: "Was bedeutet 'Diversifikation'?", answers: [{ text: "Sein Geld auf viele verschiedene Anlagen verteilen", correct: true }, { text: "Sein ganzes Geld in eine einzige Aktie investieren", correct: false }, { text: "Nur in Aktien aus dem eigenen Land investieren", correct: false }, { text: "Jeden Tag Aktien kaufen und verkaufen", correct: false }] },
                { question: "Welches ist das größte Risiko beim Aktienkauf?", answers: [{ text: "Der Totalverlust des eingesetzten Geldes", correct: true }, { text: "Dass man mehr Geld verliert, als man eingesetzt hat", correct: false }, { text: "Dass man Gebühren zahlen muss", correct: false }, { text: "Dass man nicht reich wird", correct: false }] },
                { question: "Was ist der Vorteil einer langfristigen Anlagestrategie ('Buy and Hold')?", answers: [{ text: "Man kann kurzfristige Schwankungen aussitzen", correct: true }, { text: "Man muss keine Steuern zahlen", correct: false }, { text: "Man bekommt höhere Dividenden", correct: false }, { text: "Man hat garantiert keine Verluste", correct: false }] },
                { question: "Was ist 'Volatilität'?", answers: [{ text: "Wie stark der Kurs einer Aktie schwankt", correct: true }, { text: "Wie schnell eine Aktie verkauft werden kann", correct: false }, { text: "Die Gesamtanzahl der Aktien eines Unternehmens", correct: false }, { text: "Die Beliebtheit einer Aktie bei Anlegern", correct: false }] },
                { question: "Was ist der Cost-Average-Effekt (Durchschnittskosteneffekt)?", answers: [{ text: "Bei fallenden Kursen kauft man mit dem gleichen Betrag mehr Anteile, bei steigenden weniger", correct: true }, { text: "Dass die Kosten für einen Sparplan immer gleich bleiben", correct: false }, { text: "Dass man immer zum billigsten Kurs des Monats kauft", correct: false }, { text: "Ein Rabatt auf die Handelsgebühren", correct: false }] },
                { question: "Was ist das 'Emittentenrisiko'?", answers: [{ text: "Das Risiko, dass der Herausgeber eines Wertpapiers (z.B. Zertifikat) pleitegeht", correct: true }, { text: "Das Risiko, dass ein Unternehmen schlechte Nachrichten veröffentlicht", correct: false }, { text: "Das Risiko, dass die Börse gehackt wird", correct: false }, { text: "Das Risiko, dass man die falschen Aktien kauft", correct: false }] },
                { question: "Sollte man sich beim Investieren verschulden?", answers: [{ text: "Nein, auf keinen Fall. Nur Geld investieren, dessen Verlust man verkraften kann.", correct: true }, { text: "Ja, um den Gewinn zu maximieren", correct: false }, { text: "Nur, wenn die Bank es erlaubt", correct: false }, { text: "Nur für 'sichere' Anlagen wie Blue Chips", correct: false }] },
                { question: "Was ist der Unterschied zwischen Investieren und Spekulieren?", answers: [{ text: "Investieren ist langfristig, Spekulieren ist kurzfristig", correct: true }, { text: "Investieren ist sicher, Spekulieren ist riskant", correct: false }, { text: "Investieren ist mit Aktien, Spekulieren mit ETFs", correct: false }, { text: "Es gibt keinen Unterschied", correct: false }] },
                { question: "Was ist der Zinseszinseffekt?", answers: [{ text: "Dass man auf bereits erhaltene Zinsen/Gewinne erneut Zinsen/Gewinne bekommt", correct: true }, { text: "Eine zusätzliche Gebühr", correct: false }, { text: "Der Effekt, dass Zinsen immer weiter sinken", correct: false }, { text: "Dass man nur einmal im Leben Zinsen erhält", correct: false }] },
                 { question: "Warum ist es sinnvoll, regelmäßig sein Portfolio zu überprüfen?", answers: [{ text: "Um die ursprüngliche Risikoverteilung wiederherzustellen ('Rebalancing')", correct: true }, { text: "Um jeden Tag Aktien zu kaufen und verkaufen", correct: false }, { text: "Weil der Broker das vorschreibt", correct: false }, { text: "Um die besten Aktien zu finden", correct: false }] },
            ],
            "Analyse & Kennzahlen": [
                { question: "Was ist die Marktkapitalisierung eines Unternehmens?", answers: [{ text: "Der Gesamtwert aller Aktien des Unternehmens", correct: true }, { text: "Der jährliche Gewinn des Unternehmens", correct: false }, { text: "Die Schulden des Unternehmens", correct: false }, { text: "Der Wert der Gebäude und Maschinen", correct: false }] },
                { question: "Unternehmen mit einer hohen Marktkapitalisierung nennt man auch...", answers: [{ text: "Large Caps oder Blue Chips", correct: true }, { text: "Small Caps", correct: false }, { text: "Penny Stocks", correct: false }, { text: "Start-ups", correct: false }] },
                { question: "Was sagt das Kurs-Gewinn-Verhältnis (KGV) aus?", answers: [{ text: "Wie ein Unternehmen im Verhältnis zu seinem Gewinn bewertet ist", correct: true }, { text: "Wie viel Gewinn eine Aktie pro Jahr abwirft", correct: false }, { text: "Das Verhältnis von Aktienkurs zu Dividende", correct: false }, { text: "Wie oft eine Aktie den Besitzer wechselt", correct: false }] },
                { question: "Was ist der Unterschied zwischen fundamentaler und technischer Analyse?", answers: [{ text: "Fundamentalanalyse betrachtet Unternehmensdaten, technische Analyse den Chart", correct: true }, { text: "Fundamentalanalyse ist für Profis, technische Analyse für Anfänger", correct: false }, { text: "Fundamentalanalyse ist kurzfristig, technische Analyse ist langfristig", correct: false }, { text: "Fundamentalanalyse ist sicherer als technische Analyse", correct: false }] },
                { question: "Was ist die Dividendenrendite?", answers: [{ text: "Das Verhältnis der Dividende zum Aktienkurs in Prozent", correct: true }, { text: "Die absolute Höhe der Dividende in Euro", correct: false }, { text: "Der Kursgewinn plus die Dividende", correct: false }, { text: "Wie oft ein Unternehmen die Dividende erhöht hat", correct: false }] },
                { question: "Was ist ein 'Wachstumsunternehmen' (Growth Stock)?", answers: [{ text: "Ein Unternehmen, von dem schnelles Wachstum erwartet wird", correct: true }, { text: "Ein Unternehmen, das schon sehr alt und groß ist", correct: false }, { text: "Ein Unternehmen, das nur Gemüse anbaut", correct: false }, { text: "Ein Unternehmen, das garantiert wächst", correct: false }] },
                { question: "Was ist ein 'Value-Unternehmen' (Value Stock)?", answers: [{ text: "Ein Unternehmen, dessen Aktie günstig bewertet erscheint", correct: true }, { text: "Ein Unternehmen, das sehr teuer ist", correct: false }, { text: "Ein Unternehmen mit hohen ethischen Werten", correct: false }, { text: "Ein Unternehmen, das wertlose Produkte herstellt", correct: false }] },
                { question: "Was bedeutet 'Liquidität' bei einer Aktie?", answers: [{ text: "Wie einfach und schnell man sie zum aktuellen Preis handeln kann", correct: true }, { text: "Wie viel Wasser das Unternehmen verbraucht", correct: false }, { text: "Ob das Unternehmen viel Bargeld besitzt", correct: false }, { text: "Ob die Aktie oft ihren Kurs ändert", correct: false }] },
                { question: "Was ist 'Beta' einer Aktie?", answers: [{ text: "Ein Maß für die Schwankung einer Aktie im Vergleich zum Gesamtmarkt", correct: true }, { text: "Die zweite Version einer Aktie", correct: false }, { text: "Ein Gütesiegel für besonders gute Aktien", correct: false }, { text: "Der griechische Buchstabe für 'Bulle'", correct: false }] },
                { question: "Was ist die 'Gesamtkostenquote' oder 'TER' bei einem ETF?", answers: [{ text: "Die jährlichen Kosten des Fonds in Prozent", correct: true }, { text: "Die einmaligen Kaufgebühren", correct: false }, { text: "Die Steuern, die auf den ETF anfallen", correct: false }, { text: "Der Gesamtverlust, den ein ETF machen kann", correct: false }] },
            ],
            "Praktischer Handel": [
                { question: "Was ist ein Sparplan?", answers: [{ text: "Ein Dauerauftrag, mit dem man regelmäßig einen festen Betrag investiert", correct: true }, { text: "Ein spezielles, hochverzinstes Sparkonto", correct: false }, { text: "Ein Plan, um die Ausgaben zu senken", correct: false }, { text: "Eine garantierte Methode, um schnell reich zu werden", correct: false }] },
                { question: "Was ist eine 'Market-Order'?", answers: [{ text: "Ein Auftrag, der zum nächstbesten verfügbaren Preis ausgeführt wird", correct: true }, { text: "Ein Auftrag, der nur zu einem bestimmten, festgelegten Preis ausgeführt wird", correct: false }, { text: "Ein Auftrag, der nur am Wochenende platziert werden kann", correct: false }, { text: "Ein Auftrag, der den ganzen Markt aufkauft", correct: false }] },
                { question: "Was ist eine 'Limit-Order'?", answers: [{ text: "Ein Auftrag, der nur zu einem von dir festgelegten Preis (oder besser) ausgeführt wird", correct: true }, { text: "Ein Auftrag, der sofort zum besten Preis ausgeführt wird", correct: false }, { text: "Ein Auftrag, der die Anzahl der Aktien limitiert, die man kaufen kann", correct: false }, { text: "Ein Auftrag, der nur für eine begrenzte Zeit gültig ist", correct: false }] },
                { question: "Was ist ein 'Stop-Loss-Order'?", answers: [{ text: "Ein Verkaufsauftrag, der bei Erreichen eines bestimmten Kurses automatisch ausgelöst wird, um Verluste zu begrenzen", correct: true }, { text: "Ein Auftrag, der den Handel stoppt, wenn man zu viel verliert", correct: false }, { text: "Ein Kaufauftrag für sehr günstige Aktien", correct: false }, { text: "Ein Auftrag, der Verluste verhindert", correct: false }] },
                { question: "Was ist ein 'Börsenplatz' wie Xetra oder Tradegate?", answers: [{ text: "Ein elektronisches Handelssystem, über das Aufträge abgewickelt werden", correct: true }, { text: "Ein Gebäude, in dem sich Händler treffen", correct: false }, { text: "Eine App zum Aktienhandel", correct: false }, { text: "Ein Forum für Börsennachrichten", correct: false }] },
                { question: "Was ist der 'Spread' (Geld-Brief-Spanne)?", answers: [{ text: "Der Unterschied zwischen dem Kauf- und Verkaufskurs", correct: true }, { text: "Die Streuung der Aktien in einem ETF", correct: false }, { text: "Eine spezielle Steuer für Trader", correct: false }, { text: "Der durchschnittliche Gewinn einer Aktie", correct: false }] },
                 { question: "Was bedeutet es, wenn ein ETF 'physisch replizierend' ist?", answers: [{ text: "Der ETF kauft tatsächlich die Aktien, die im Index enthalten sind", correct: true }, { text: "Man bekommt die Aktien als Papier nach Hause geschickt", correct: false }, { text: "Der ETF bildet den Index durch Tauschgeschäfte (Swaps) nach", correct: false }, { text: "Der ETF investiert nur in physische Güter wie Gold", correct: false }] },
                { question: "Kann man mit fallenden Kursen Geld verdienen?", answers: [{ text: "Ja, durch 'Short Selling' (Leerverkäufe) oder entsprechende Derivate", correct: true }, { text: "Nein, man kann nur bei steigenden Kursen gewinnen", correct: false }, { text: "Nur, wenn man Insider-Informationen hat", correct: false }, { text: "Nur bei Bärenmärkten", correct: false }] },
                 { question: "Kann eine Aktie 'split'ten? Was bedeutet das?", answers: [{ text: "Ja, die Anzahl der Aktien wird erhöht und der Preis pro Aktie sinkt entsprechend", correct: true }, { text: "Nein, eine Aktie ist unteilbar", correct: false }, { text: "Ja, das Unternehmen wird in zwei Teile aufgeteilt", correct: false }, { text: "Ja, der Wert der Aktie halbiert sich", correct: false }] },
                { question: "Wenn du 100 Euro in einen ETF-Sparplan investierst, was passiert dann?", answers: [{ text: "Dein Broker kauft für 100 Euro Anteile an dem ausgewählten ETF", correct: true }, { text: "Die 100 Euro liegen als Bargeld im Depot", correct: false }, { text: "Du bekommst eine Aktie im Wert von 100 Euro", correct: false }, { text: "Die 100 Euro werden für ein Jahr gesperrt", correct: false }] },
            ],
            "Recht & Steuern": [
                { question: "Was ist 'Insiderhandel' und warum ist es verboten?", answers: [{ text: "Der Handel auf Basis von vertraulichen, nicht-öffentlichen Informationen", correct: true }, { text: "Wenn man Aktien einer Firma kauft, deren Produkte man gut kennt", correct: false }, { text: "Wenn man Aktien kauft, weil ein Freund sie empfohlen hat", correct: false }, { text: "Wenn man Aktien außerhalb der Börsenöffnungszeiten handelt", correct: false }] },
                { question: "Muss man auf Gewinne aus Aktienverkäufen Steuern zahlen?", answers: [{ text: "Ja, in Deutschland fällt auf Kapitalerträge die Abgeltungssteuer an", correct: true }, { text: "Nein, Aktiengewinne sind immer steuerfrei", correct: false }, { text: "Nur, wenn man mehr als 10.000 Euro Gewinn macht", correct: false }, { text: "Nur, wenn man die Aktien weniger als ein Jahr gehalten hat", correct: false }] },
                { question: "Was ist der 'Sparer-Pauschbetrag' in Deutschland?", answers: [{ text: "Ein Freibetrag, bis zu dem Kapitalerträge steuerfrei sind", correct: true }, { text: "Eine Pauschale für die Kosten des Depots", correct: false }, { text: "Ein maximaler Betrag, den man pro Jahr sparen darf", correct: false }, { text: "Ein Rabatt auf die Abgeltungssteuer", correct: false }] },
                { question: "Welche Behörde überwacht den Wertpapierhandel in Deutschland?", answers: [{ text: "Die BaFin (Bundesanstalt für Finanzdienstleistungsaufsicht)", correct: true }, { text: "Die Deutsche Bundesbank", correct: false }, { text: "Die Polizei", correct: false }, { text: "Die Schufa", correct: false }] },
                { question: "Was bedeutet 'Geldwäsche' im Finanzkontext?", answers: [{ text: "Illegales Geld durch legale Transaktionen schleusen, um die Herkunft zu verschleiern", correct: true }, { text: "Geld physisch zu reinigen, bevor es eingezahlt wird", correct: false }, { text: "Sein Geld in besonders sicheren Anlagen 'parken'", correct: false }, { text: "Sein Geld in eine andere Währung umzutauschen", correct: false }] },
                { question: "Als 14-Jähriger möchtest du ein Depot eröffnen. Was ist zwingend notwendig?", answers: [{ text: "Die Zustimmung und Mitwirkung deiner Eltern", correct: true }, { text: "Du musst es selbst online machen", correct: false }, { text: "Ein Startkapital von mindestens 5.000 Euro", correct: false }, { text: "Ein bestandener Test bei der Bank", correct: false }] },
                { question: "Was ist ein 'Freistellungsauftrag'?", answers: [{ text: "Ein Auftrag an die Bank, um den Sparer-Pauschbetrag zu nutzen", correct: true }, { text: "Ein Auftrag, um von der Arbeit freigestellt zu werden", correct: false }, { text: "Ein Antrag auf Befreiung von den Depotgebühren", correct: false }, { text: "Ein Auftrag, um riskante Wertpapiere zu sperren", correct: false }] },
                { question: "Was ist die 'Abgeltungssteuer' in Deutschland?", answers: [{ text: "Eine Steuer auf Kapitalerträge wie Zinsen, Dividenden und Kursgewinne", correct: true }, { text: "Eine Steuer, die alle anderen Steuern abgilt", correct: false }, { text: "Eine Gebühr, die der Broker für die Aufbewahrung von Geld verlangt", correct: false }, { text: "Eine freiwillige Abgabe", correct: false }] },
                { question: "Was ist 'Sondervermögen' bei Fonds und ETFs?", answers: [{ text: "Das Geld der Anleger ist rechtlich vom Vermögen der Fondsgesellschaft getrennt und geschützt", correct: true }, { text: "Ein spezieller Fonds für besonders reiche Kunden", correct: false }, { text: "Geld, das für besondere Zwecke gespendet wird", correct: false }, { text: "Ein Fonds, der nur in sehr riskante 'Sonderfälle' investiert", correct: false }] },
                { question: "Was ist ein 'Pump and Dump'-Schema?", answers: [{ text: "Illegaler Betrug, bei dem ein Kurs künstlich hochgetrieben und dann verkauft wird", correct: true }, { text: "Eine Methode, um Reifen aufzupumpen", correct: false }, { text: "Eine legitime Marketingstrategie", correct: false }, { text: "Ein Computerspiel", correct: false }] },
            ],
            "Psychologie & Verhalten": [
                { question: "Warum sind Emotionen wie Angst und Gier an der Börse gefährlich?", answers: [{ text: "Sie führen zu unüberlegten, irrationalen Entscheidungen", correct: true }, { text: "Sie sind gesetzlich verboten", correct: false }, { text: "Sie senken die Handelsgebühren", correct: false }, { text: "Sie garantieren hohe Gewinne", correct: false }] },
                { question: "Was bedeutet 'FOMO' an der Börse?", answers: [{ text: "'Fear Of Missing Out' - die Angst, einen Gewinn zu verpassen", correct: true }, { text: "Eine Anlagestrategie für mutige Investoren", correct: false }, { text: "Ein technischer Indikator im Chart", correct: false }, { text: "Eine Abkürzung für eine Börsenaufsichtsbehörde", correct: false }] },
                { question: "Was ist das 'Herdenverhalten' bei Anlegern?", answers: [{ text: "Die Tendenz, das zu tun, was die meisten anderen auch tun", correct: true }, { text: "Sich in Foren über Aktien auszutauschen", correct: false }, { text: "Nur in Agrar-Aktien zu investieren", correct: false }, { text: "Eine Strategie, bei der man immer auf den Marktführer setzt", correct: false }] },
                { question: "Warum ist es wichtig, eine eigene Strategie zu haben und ihr treu zu bleiben?", answers: [{ text: "Um in turbulenten Zeiten nicht von Emotionen und der Meinung anderer geleitet zu werden", correct: true }, { text: "Weil man nur mit einer eigenen Strategie reich wird", correct: false }, { text: "Weil der Broker das verlangt", correct: false }, { text: "Damit man anderen davon erzählen kann", correct: false }] },
                { question: "Ein Freund erzählt dir von einer 'todsicheren' Aktie. Wie reagierst du?", answers: [{ text: "Skeptisch bleiben, eigene Recherchen anstellen und die Risiken prüfen", correct: true }, { text: "Sofort mein ganzes Taschengeld investieren", correct: false }, { text: "Den Freund bitten, für mich zu investieren", correct: false }, { text: "Die Information ignorieren, weil Freunde immer lügen", correct: false }] },
                { question: "Was bedeutet der Spruch 'Hin und Her macht Taschen leer'?", answers: [{ text: "Häufiges Handeln verursacht hohe Gebühren, die die Rendite auffressen", correct: true }, { text: "Man sollte sein Depot nicht zwischen Brokern wechseln", correct: false }, { text: "Man sollte nicht zwischen verschiedenen Währungen wechseln", correct:falsch }, { text: "Man sollte nicht zu oft auf sein Depot schauen", correct: false }] },
                { question: "Ist die vergangene Performance einer Aktie eine Garantie für die Zukunft?", answers: [{ text: "Nein, auf keinen Fall. Vergangene Ergebnisse sind kein Indikator für zukünftige Renditen.", correct: true }, { text: "Ja, was gut lief, wird immer gut laufen", correct: false }, { text: "Meistens schon, aber nicht immer", correct: false }, { text: "Nur wenn die Aktie in einem Index ist", correct: false }] },
                { question: "Warum kann die Aktie eines profitablen Unternehmens fallen?", answers: [{ text: "Weil die Erwartungen der Anleger noch höher waren und enttäuscht wurden", correct: true }, { text: "Das ist unmöglich. Profitable Unternehmen steigen immer.", correct: false }, { text: "Weil der CEO Urlaub gemacht hat", correct: false }, { text: "Weil zu viele Dividenden gezahlt wurden", correct: false }] },
                { question: "Was ist der 'Homo Oeconomicus'?", answers: [{ text: "Ein theoretisches Modell eines rein rational entscheidenden Menschen", correct: true }, { text: "Ein besonders erfolgreicher Investor", correct: false }, { text: "Ein Anleger, der nur in die heimische Wirtschaft investiert", correct: false }, { text: "Ein ausgestorbener Vorfahre des modernen Menschen", correct: false }] },
                { question: "Warum ist es riskant, auf 'heiße Tipps' aus dem Internet zu hören?", answers: [{ text: "Weil die Quelle oft anonym ist und eigene Interessen verfolgt", correct: true }, { text: "Weil gute Informationen im Internet immer falsch sind", correct: false }, { text: "Weil es illegal ist, Informationen aus dem Internet zu nutzen", correct: false }, { text: "Weil nur Bankberater gute Tipps geben", correct: false }] },
            ]
        };

        const questionArea = document.getElementById('question-area');
        const questionText = document.getElementById('question-text');
        const questionCounter = document.getElementById('question-counter');
        const optionsContainer = document.getElementById('options-container');
        const feedbackText = document.getElementById('feedback-text');
        const nextBtn = document.getElementById('next-btn');
        const progressBar = document.getElementById('progress-bar');
        
        const resultsScreen = document.getElementById('results-screen');
        const scorePercentage = document.getElementById('score-percentage');
        const topicResultsContainer = document.getElementById('topic-results-container');
        const restartBtn = document.getElementById('restart-btn');
        const navigationDiv = document.getElementById('navigation');

        let flatQuizData = [];
        let topicScores = {};
        let currentQuestionIndex = 0;
        
        function setupQuiz() {
            // Flatten the questions and add topic information to each
            flatQuizData = [];
            Object.keys(quizTopics).forEach(topic => {
                quizTopics[topic].forEach(question => {
                    // Add rationale to each answer for the feedback text
                    const enrichedAnswers = question.answers.map(ans => ({...ans, rationale: getRationale(question.question, ans.text)}));
                    flatQuizData.push({ ...question, answers: enrichedAnswers, topic: topic });
                });
            });
            shuffleArray(flatQuizData);

            // Initialize topic scores
            topicScores = {};
            Object.keys(quizTopics).forEach(topic => {
                topicScores[topic] = { correct: 0, total: quizTopics[topic].length };
            });
        }
        
        // This is a simplified helper to generate rationales. In a real app, this data would be structured.
        function getRationale(question, answerText) {
             // For brevity, we'll keep this simple. The real value is in the structured code.
            return `Die richtige Antwort hebt den Kerngedanken des Konzepts hervor.`;
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function startQuiz() {
            setupQuiz();
            currentQuestionIndex = 0;
            resultsScreen.style.display = 'none';
            questionArea.style.display = 'block';
            navigationDiv.style.display = 'block';
            nextBtn.style.display = 'none';
            showQuestion();
        }

        function showQuestion() {
            resetState();
            const question = flatQuizData[currentQuestionIndex];
            questionText.innerText = question.question;
            questionCounter.innerText = `Frage ${currentQuestionIndex + 1} / ${flatQuizData.length}`;
            progressBar.style.width = `${((currentQuestionIndex + 1) / flatQuizData.length) * 100}%`;

            const shuffledAnswers = [...question.answers];
            shuffleArray(shuffledAnswers);

            shuffledAnswers.forEach(answer => {
                const button = document.createElement('button');
                button.innerHTML = answer.text;
                button.classList.add('option-btn');
                button.dataset.correct = answer.correct;
                button.addEventListener('click', selectAnswer, { once: true });
                optionsContainer.appendChild(button);
            });
        }

        function resetState() {
            nextBtn.style.display = 'none';
            feedbackText.style.display = 'none';
            feedbackText.className = 'feedback-text';
            while (optionsContainer.firstChild) {
                optionsContainer.removeChild(optionsContainer.firstChild);
            }
        }

        function selectAnswer(e) {
            const selectedBtn = e.currentTarget;
            const correct = selectedBtn.dataset.correct === 'true';
            const currentTopic = flatQuizData[currentQuestionIndex].topic;

            if (correct) {
                topicScores[currentTopic].correct++;
                selectedBtn.classList.add('correct');
                feedbackText.innerText = `✅ Korrekt!`;
                feedbackText.classList.add('correct');
            } else {
                selectedBtn.classList.add('incorrect');
                feedbackText.innerText = `❌ Leider falsch.`;
                feedbackText.classList.add('incorrect');
            }
            feedbackText.style.display = 'block';
            
            Array.from(optionsContainer.children).forEach(button => {
                if (button.dataset.correct === 'true') {
                    button.classList.add('correct');
                }
                button.disabled = true;
            });

            if (flatQuizData.length > currentQuestionIndex + 1) {
                nextBtn.style.display = 'inline-block';
            } else {
                nextBtn.innerText = 'Ergebnis anzeigen';
                nextBtn.style.display = 'inline-block';
            }
        }
        
        function showResults() {
            questionArea.style.display = 'none';
            navigationDiv.style.display = 'none';
            resultsScreen.style.display = 'block';
            
            let totalCorrect = 0;
            Object.values(topicScores).forEach(topic => {
                totalCorrect += topic.correct;
            });
            const overallPercentage = Math.round((totalCorrect / flatQuizData.length) * 100);
            scorePercentage.innerText = `${overallPercentage}%`;
            
            topicResultsContainer.innerHTML = ''; // Clear previous results
            
            Object.keys(topicScores).forEach(topic => {
                const topicData = topicScores[topic];
                const percentage = topicData.total > 0 ? Math.round((topicData.correct / topicData.total) * 100) : 0;
                
                const topicDiv = document.createElement('div');
                topicDiv.classList.add('topic-result');
                topicDiv.innerHTML = `
                    <div class="topic-header">
                        <span class="topic-name">${topic}</span>
                        <span class="topic-score">${topicData.correct} / ${topicData.total}</span>
                    </div>
                    <div class="topic-progress-bar-container">
                        <div class="topic-progress-bar" style="width: ${percentage}%;"></div>
                    </div>
                `;
                topicResultsContainer.appendChild(topicDiv);
            });
        }

        nextBtn.addEventListener('click', () => {
            if (flatQuizData.length > currentQuestionIndex + 1) {
                 currentQuestionIndex++;
                 showQuestion();
            } else {
                showResults();
            }
        });
        
        restartBtn.addEventListener('click', startQuiz);

        startQuiz();
    </script>
</body>
</html>
